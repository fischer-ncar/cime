<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE config_machines SYSTEM "file:/Users/Andi/Development/ESMCI/cime/cime_config/acme/machines/config_machines.dtd">

<config_machines>
    <machine MACH="MACHINE NAME">
        <DESC>DESCRIPTION OF THE MACHINE</DESC>                             <!-- can be anything -->
        <NODENAME_REGEX>MACHINE</NODENAME_REGEX>                            <!-- regex for auto-detect that you're on this machine -->
        <TESTS>acme_developer</TESTS>                                       <!-- preferred test suite to run on this machine -->
        <OS>USERDEFINED_required_macros</OS>                                <!-- LINUX,Darwin,CNL,AIX,BGL,BGP -->
        <COMPILERS>intel,ibm,pgi,pathscale,gnu,cray,nag</COMPILERS>         <!-- intel,ibm,pgi,pathscale,gnu,cray,nag -->
        <MPILIBS>openmpi,mpich,mpt,mpt,ibm,mpi-serial</MPILIBS>                <!-- openmpi, mpich, ibm, mpi-serial -->
        <CESMSCRATCHROOT>USERDEFINED_required_build</CESMSCRATCHROOT>                     <!-- complete path to the 'scratch' directory -->
        <RUNDIR>USERDEFINED_required_build</RUNDIR>                       <!-- complete path to the run directory -->
        <EXEROOT>USERDEFINED_required_build</EXEROOT>                     <!-- complete path to the build directory -->
        <DIN_LOC_ROOT>USERDEFINED_required_build</DIN_LOC_ROOT>           <!-- complete path to the inputdata directory -->
        <DIN_LOC_ROOT_CLMFORC>USERDEFINED_optional_build</DIN_LOC_ROOT_CLMFORC> <!-- path to the optional forcing data for CLM (for CRUNCEP forcing) -->
        <DOUT_S>FALSE</DOUT_S>                                            <!-- logical for short term archiving -->
        <DOUT_S_ROOT>USERDEFINED_optional_run</DOUT_S_ROOT>               <!-- complete path to a short term archiving directory -->
        <DOUT_L_MSROOT>USERDEFINED_optional_run</DOUT_L_MSROOT>           <!-- complete path to a long term archiving directory -->
        <CCSM_BASELINE>USERDEFINED_optional_run</CCSM_BASELINE>           <!-- where the cesm testing scripts write and read baseline results -->
        <CCSM_CPRNC>USERDEFINED_optional_test</CCSM_CPRNC>                <!-- path to the cprnc tool used to compare netcdf history files in testing -->
        <BATCHQUERY>USERDEFINED_optional_run</BATCHQUERY>
        <BATCHSUBMIT>USERDEFINED_optional_run</BATCHSUBMIT>
        <BATCHREDIRECT></BATCHREDIRECT>
        <SUPPORTED_BY>USERDEFINED_optional</SUPPORTED_BY>
        <GMAKE_J>1</GMAKE_J>
        <MAX_TASKS_PER_NODE>USERDEFINED_required_build</MAX_TASKS_PER_NODE>
        
        <batch_system type="Batchsystem name" version="Version Numer x.y">
            <queues>
                <queue walltimemax="hh:mm:ss" jobmin="1" jobmax="130181" >regular</queue>
                <queue walltimemax="00:30:00" jobmin="1" jobmax="12288" default="true">debug</queue>
            </queues>
            <walltimes>
                <walltime default="true">00:30:00</walltime>
            </walltimes>
        </batch_system>
        
        <mpirun mpilib="default">
            <executable args="">mpirun</executable>
            <arguments>
                <arg name="" default=""></arg>      
            </arguments>
        </mpirun>
        
        <!-- Module system of machine, dependencies for compiler and mpilib combinations -->
        <module_system type="Name of modue system, prefix for module system commands, e.g. 'module'">
            
            <!-- list of init_path elements, one per supported language e.g. sh, perl, python-->
            <init_path lang="perl">PATH</init_path>
           
            <!-- list of cmd_path elements, one for every supported language, e.g. sh, perl, python -->
            <cmd_path lang="perl">e.g. /opt/modules/default/bin/modulecmd perl</cmd_path>
            <cmd_path lang="python">e.g. /opt/modules/default/bin/modulecmd python</cmd_path>
            <cmd_path lang="sh">module</cmd_path>
            

            <!-- List of modules elements, executing commands 
                if compiler and mpilib condition applies -->
            
            <!-- Always execute -->
            <modules> 
                <command name="rm">intel</command>
                <command name="rm">pmi</command>
            </modules>
            
            <!-- If compiler is  $C -->
            <modules compiler="e.g. intel">  
                <!-- List of command elements -->
                <command name="e.g. load, add, switch">Option, e.g. module name</command>
            </modules>
            
            <!-- If compiler is $C and mpilib $M -->
            <modules compiler="e.g. intel" mpilib="e.g. mpi-serial" >
                <command name="Module command">Option</command>
            </modules>
            
            <!-- If compiler is $C and not mpilib $M -->
            <modules compiler="intel" mpilib="!mpi-serial" >
                <command name=""></command>
            </modules>
           
           <!-- If mpilib is $M -->
            <modules mpilib="mpi-serial">
                <command name=""></command>
                <command name=""></command>
            </modules>
            
        </module_system>
        
        
        <!-- List of environment variable elements, 
            set environment variables depending on compiler and mpilib -->
        
        <!-- Always set -->
        <environment_variables>
            <env name="VARIABlE_NAME">VALUE</env>
        </environment_variables>
        
        <!-- Set if compiler and mpilib  -->
        <environment_variables compiler="" mpilib="">
            <env name="VARIABLE_NAME">VALUE</env>
        </environment_variables>
        
    </machine>

</config_machines>
